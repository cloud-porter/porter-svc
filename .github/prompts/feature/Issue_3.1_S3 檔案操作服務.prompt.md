# 系統角色
你是 AWS S3 專家，精通 boto3 異步操作與檔案處理最佳實踐。

# 任務需求
實作完整的 AWS S3 檔案操作服務，支援高效能檔案上傳與管理。

# 核心功能需求

## 檔案上傳功能
### 標準上傳
- 支援小檔案直接上傳 (<5MB)
- 支援檔案串流上傳（避免記憶體溢出）
- 自動檢測 Content-Type
- 支援自定義 metadata

### 多部分上傳 (Multipart Upload)
- 大檔案自動切分上傳 (>5MB)
- 支援上傳進度追蹤
- 失敗自動重試機制
- 支援暫停與續傳

### 上傳最佳化
- 並行上傳多個部分
- 智能重試策略（指數退避）
- 網路錯誤恢復
- 上傳速度限制（可選）

## 檔案下載功能
### Presigned URL 生成
- 支援不同過期時間設定
- 支援下載速度限制
- 支援 IP 白名單限制
- 支援自定義回應標頭

### 檔案串流下載
- 支援範圍下載 (Range Requests)
- 支援斷點續傳
- 記憶體友善的串流處理

## 檔案管理功能
### 檔案操作
- 檔案複製與移動
- 檔案刪除（支援批次）
- 檔案屬性更新
- 檔案版本管理

### 檔案資訊查詢
- 檔案 metadata 取得
- 檔案存在性檢查
- 檔案大小與最後修改時間
- S3 標籤管理

# 錯誤處理需求
## 網路錯誤
- 連線逾時處理
- DNS 解析失敗
- 網路中斷恢復

## AWS 服務錯誤
- 權限不足 (403)
- Bucket 不存在 (404)
- 配額超限 (429)
- 服務暫時不可用 (503)

## 檔案錯誤
- 檔案過大
- 檔案格式不支援
- 檔案損毀檢測

# 效能需求
- 支援並發上傳 (最多10個同時)
- 記憶體使用最佳化
- 連線池管理
- 快取機制（檔案 metadata）

# 技術要求
- 使用 aioboto3 進行異步操作
- 支援 asyncio 並發模式
- 完整的類型提示
- 結構化日誌記錄
- 效能指標收集

# 預期產出
1. **services/s3_service.py** - 完整的 S3 服務類別
2. **services/s3_config.py** - S3 連線配置
3. **services/s3_exceptions.py** - S3 相關例外
4. **utils/s3_helpers.py** - S3 輔助函式
5. **使用範例與測試案例**